# Service name (red, blue, green, yellow)
name: red

# Environment (development, staging, production)
environment: development

replicaCount: 1

image:
  repository: quay.io/davidaparicio/red
  tag: latest
  pullPolicy: IfNotPresent

service:
  type: ClusterIP
  port: 80
  targetPort: 8080

ingress:
  enabled: true
  className: nginx
  host: red.dev.127.0.0.1.nip.io
  annotations:
    nginx.ingress.kubernetes.io/rewrite-target: /

resources:
  requests:
    memory: "32Mi"
    cpu: "50m"
  limits:
    memory: "64Mi"
    cpu: "100m"

containerPort: 8080

livenessProbe:
  httpGet:
    path: /healthz
    port: 8080
  initialDelaySeconds: 5
  periodSeconds: 10

readinessProbe:
  httpGet:
    path: /healthz
    port: 8080
  initialDelaySeconds: 3
  periodSeconds: 5

progressDeadlineSeconds: 60

# Git-sync sidecar for feature flags
gitSync:
  enabled: false
  image: quay.io/davidaparicio/git-sync:latest
  repoURL: "https://github.com/davidaparicio/microsvcs.git"
  branch: "main"
  sourcePath: "color/demo-flags.goff.yaml"
  targetPath: "/shared/config"
  syncInterval: "*/2 * * * *"
  port: 9090
  mountPath: /app/config
  resources:
    requests:
      memory: "32Mi"
      cpu: "25m"
    limits:
      memory: "64Mi"
      cpu: "100m"
